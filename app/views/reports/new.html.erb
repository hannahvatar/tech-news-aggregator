<!-- app/views/reports/new.html.erb -->
<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-6 text-center">Tech Insights Report Generator</h1>

  <!-- Loading Indicator -->
  <div id="loading-indicator" class="hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-xl">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
      <p class="mt-4 text-gray-700">Generating your report...</p>
    </div>
  </div>

  <!-- Flash Messages -->
  <div id="flash-messages" class="mb-6">
    <% flash.each do |type, message| %>
      <div class="<%= type == 'error' ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700' %> p-4 rounded-lg mb-4">
        <%= message %>
      </div>
    <% end %>
  </div>

  <!-- Report Generation Form -->
  <div class="max-w-md mx-auto bg-white shadow-md rounded-lg p-8">
<!-- app/views/reports/new.html.erb -->
<%= form_with(url: generate_reports_path, method: :post, local: true, class: "space-y-6") do |f| %>
  <div>
    <%= f.label :start_date, "Start Date", class: "block text-gray-700 font-bold mb-2" %>
    <%= f.date_field :start_date,
        required: true,
        class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" %>
  </div>

  <div>
    <%= f.label :end_date, "End Date", class: "block text-gray-700 font-bold mb-2" %>
    <%= f.date_field :end_date,
        required: true,
        class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" %>
  </div>

  <div>
    <%= f.label :report_type, "Report Type", class: "block text-gray-700 font-bold mb-2" %>
    <%= f.select :report_type,
        [
          ['Executive Summary', 'executive'],
          ['Comprehensive Insights', 'detailed'],
          ['Trend Analysis', 'summary']
        ],
        { prompt: "Select Report Type" },
        {
          required: true,
          class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        } %>
  </div>

  <div>
    <%= f.label :detail_level, "Detail Level", class: "block text-gray-700 font-bold mb-2" %>
    <%= f.select :detail_level,
        [
          ['Concise (10 pages)', 'low'],
          ['Medium (20 pages)', 'medium'],
          ['High (30 pages)', 'high']
        ],
        { prompt: "Select Detail Level" },
        {
          required: true,
          class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        } %>
  </div>

  <div class="flex items-center mb-4">
    <%= f.check_box :include_visualizations,
        class: "h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mr-2",
        value: "1" %>
    <%= f.label :include_visualizations, "Include Data Visualizations",
        class: "text-gray-900" %>
  </div>

  <div>
    <%= f.submit "Generate Report",
        class: "w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300" %>
  </div>
<% end %>
  </div>
</div>
