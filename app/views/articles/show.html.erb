<!-- app/views/articles/show.html.erb -->
<div class="article-show-container">
  <!-- Debug info section (kept as is) -->
  <div style="background: #f5f5f5; padding: 10px; margin: 10px; border: 1px solid #ddd;">
    <h3>Feed Debug Info:</h3>
    <ul>
      <li>Article ID: <%= @article.id %></li>
      <li>Article Feed ID: <%= @article.feed_id %></li>
      <li>Feed Present?: <%= @article.feed.present? %></li>
      <% if @article.feed.present? %>
        <li>Feed ID: <%= @article.feed.id %></li>
        <li>Feed Name: <%= @article.feed.name.inspect %></li>
        <li>Feed URL: <%= @article.feed.url %></li>
      <% end %>
    </ul>
  </div>

  <h1><%= @article.title %></h1>

  <div class="article-metadata">
    <p>
      Source: <%= @article.feed&.name || "No source available" %>
    </p>
    <p>Published: <%= @article.published_at&.strftime("%B %d, %Y at %I:%M %p") %></p>
  </div>

  <% if @article.ai_summary.present? %>
    <div class="ai-summary">
      <h3>AI Summary</h3>
      <p><%= simple_format(@article.ai_summary.content) %></p>
      <small class="text-muted">
        Generated: <%= @article.ai_summary.generated_at&.strftime("%B %d, %Y at %I:%M %p") %>
      </small>

      <!-- Optional: Add a button to regenerate summary -->
      <%= button_to "Regenerate Summary", regenerate_summary_article_path(@article), method: :post, class: "btn btn-sm btn-outline-secondary mt-2" if Rails.env.development? %>
    </div>
  <% else %>
    <div class="ai-summary-placeholder">
      <p>No AI Summary available</p>
      <%= button_to "Generate Summary", generate_summary_article_path(@article), method: :post, class: "btn btn-sm btn-primary" if Rails.env.development? %>
    </div>
  <% end %>

  <!-- Rest of the code remains the same -->
  <% if @article.respond_to?(:content) && @article.content.present? %>
    <div class="article-content">
      <h3>Full Content</h3>
      <%= simple_format(@article.content) %>
    </div>
  <% end %>

  <% if @article.respond_to?(:key_facts) && @article.key_facts.present? %>
    <div class="key-facts">
      <h3>Key Facts</h3>
      <ul>
        <% @article.key_facts.each do |fact| %>
          <li><%= fact.content %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="navigation">
    <%= link_to "Back to Articles", articles_path, class: "btn btn-secondary" %>
  </div>
</div>
